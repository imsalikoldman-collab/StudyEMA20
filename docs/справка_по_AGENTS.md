
# Справка по **AGENTS.md** (README для код-агентов)

## Что это такое
**AGENTS.md** — это простой открытый формат (Markdown‑файл) с правилами и контекстом для ИИ‑агентов, которые работают с вашим репозиторием (Codex/GPT, Cursor, Copilot‑подобные инструменты и т. п.). По сути — «README для агентов»: единое, предсказуемое место, где агент находит, **как запускать проект, какие есть ограничения и стандарты, что сейчас важно**.

## Зачем он нужен
- Быстрый «холодный старт» для агента: меньше догадок, больше воспроизводимости.
- Единый источник правды: люди и агенты ориентируются на одно и то же.
- Снижение вредных правок: заранее описанные **границы** и «запретные зоны».
- Улучшение поиска в RAG/IDE: предсказуемое имя и путь файла повышают шанс, что его найдут ретриверы.

## Где хранить и как подключать
- Положите `AGENTS.md` **в корень репозитория**. Многие инструменты ожидают его именно там.
- Сошлитесь на него из `README.md`.
- Если у вас уже есть `AGENT.md`/`AGENTS.txt` и т. п., можно переименовать и оставить симлинк для обратной совместимости.
- Для специфичных IDE можно также дублировать ключевые правила в их конфиг (например, `.cursor/rules`) — но `AGENTS.md` остаётся каноническим источником.

## Как это связано с Codex/GPT
- Для моделей (Codex/GPT) **нет «магического» имени**: они увидят только то, что **вы передали** в контекст/инструмент. Однако многие агенты/IDE **по умолчанию ищут** `AGENTS.md` и подмешивают его содержимое — поэтому **согласованный формат и имя файла помогают**.
- В видео‑туториалах и статьях по Codex/GPT рекомендуют класть `AGENTS.md` в корень репо и описывать команды, стандарты и ограничения — агент использует это как инструкцию «как работать» с проектом.

## Мини‑шаблон `AGENTS.md`
Скопируйте в корень и адаптируйте под свой стек.

```md
# AGENTS.md — правила для код‑агента

## Цель проекта
Коротко: чем занимается проект и что считается «готово».

## Технологии и структура
- Node 20 / PNPM
- Папки: `apps/web`, `packages/ui`, `packages/api`
- Точки входа: `apps/web/src/main.tsx`, `packages/api/src/index.ts`

## Команды (запускай именно так)
- Установка: `pnpm i`
- Линт: `pnpm lint` (исправляй автофиксами)
- Тесты: `pnpm test` (перед PR — обязательно)
- Dev: `pnpm dev` (порт 5173)

## Правила изменения кода
- TypeScript строго (`noImplicitAny: true`)
- Коммиты по Conventional Commits: `feat(scope): ...`
- Не трогай `packages/ui/*` без задачи с меткой `design`
- В новые компоненты — тесты и сторисы

## Границы и запреты
- Не добавляй зависимости без обсуждения
- Не коммить .env/секреты; используй `.env.example`

## Контекст для агента
- Основные задачи сейчас: оптимизация SSR, починка e2e
- Известные грабли: нестабильный тест `cart.e2e.ts` — перезапусти, если упадёт

## Ревью и PR
- Цель ≤ 300 изменённых строк
- Связывай задачи: `Fixes #123`
```

## Лучшие практики содержания
1. **Будьте конкретны**: точные команды, параметры, пути и чек‑листы («перед PR запусти …»).
2. **Опишите границы**: что нельзя менять без ревью, «опасные» каталоги, требования к миграциям.
3. **Держите в актуальном состоянии**: обновляйте при изменении процессов/скриптов.
4. **Добавьте словарь и синонимы** (agent, agents, агент, агенты) — помогает ретриверам.
5. **Не кладите секреты**: используйте `.env.example` и секреты CI.

## Частые вопросы (FAQ)
**В: Есть ли разница `agent.md` vs `agents.md`?**  
О: Для самих моделей — нет. Для экосистемы инструментария удобнее и привычнее именно `AGENTS.md` в корне.

**В: Обязательно ли хранить всё только в `AGENTS.md`?**  
О: Нет. Можно дублировать выдержки в специфичные конфиги IDE/агентов, но `AGENTS.md` остаётся единой точкой входа.

**В: Что писать, если проект многоязычный/монорепо?**  
О: Давайте карту репозитория, правила для пакетов, общие команды, а детали разносите по под‑модулям с ссылками из `AGENTS.md`.

## Чек‑лист перед PR
- [ ] `AGENTS.md` лежит в корне и ссылкой упомянут в `README.md`
- [ ] Правила соответствуют текущим линтерам/тестам/CI
- [ ] Есть раздел «границы/запреты»
- [ ] Прописаны команды запуска, тестов и стиля коммитов
- [ ] Описаны актуальные «грабли» и приоритеты спринта

---

> Подсказка: если вы используете Cursor, `AGENTS.md` можно держать вместо/вместе с `.cursor/rules`. В других инструментах (Codex CLI, Aider, Gemini CLI) также есть способы явно указать этот файл.
